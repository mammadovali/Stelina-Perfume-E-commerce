@model IEnumerable<Product>


@foreach (var item in Model)
{
    var imagePath = item.Images.FirstOrDefault()?.Name;

    <li class="product-item col-lg-4 col-md-6 col-sm-6 col-xs-6 col-ts-12 style-1">
        <div class="product-inner equal-element">
            <div class="product-top">
                <div class="flash">
                    <span class="onnew">
                        <span class="text"> new </span>
                    </span>
                </div>
            </div>
            <div class="product-thumb" data-id="@item.Id">
                <div class="thumb-inner">
                    <a asp-action="details" asp-route-id="@item.Id">
                        <img src="~/assets/images/@imagePath"
                         alt="img" />
                    </a>
                    <div class="thumb-group">
                        <div class="yith-wcwl-add-to-wishlist">
                            <div class="yith-wcwl-add-button">
                                <a href="javascript:addToFavorites(@item.Id)">Add to Wishlist</a>
                            </div>
                        </div>
                        <div class="loop-form-add-to-cart">
                            <button class="single_add_to_cart_button button">
                                Add to cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="product-info">
                <h5 class="product-name product_title">
                    <a asp-action="details" asp-route-id="@item.Id">@item.Name</a>
                </h5>
                <div class="group-info">
                    <div class="stars-rating">
                        <div class="star-rating">
                            <span class="star-3"></span>
                        </div>
                        <div class="count-star">(3)</div>
                    </div>
                    <div class="price">
                        <ins> @item.Price ₼ </ins>
                    </div>
                </div>
            </div>
        </div>
    </li>
}


<script>
        function addToFavorites(productId){
           const favorites =  ($.cookie('favorites') || '').split(',').filter(item => item.length > 0);
           
           if(favorites.filter(item => item == productId).length == 0){
               favorites.push(productId);
           
               $.cookie('favorites', favorites.toString(), { path: '/'})
           }
           
           console.log(favorites)
        }

</script>

